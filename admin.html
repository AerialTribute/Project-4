<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aerial Tribute - Admin Portal</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

    <!-- Main CSS -->
    <link rel="stylesheet" href="style.css" />

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B09D986QX1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag("js", new Date());
      gtag("config", "G-B09D986QX1");
    </script>

    <style>
      /* Dashboard clean-up for Option 1 */
      .dashboard-placeholder {
        background: #ffffff;
        border-radius: 12px;
        padding: 32px;
        border: 1px solid #e2e4e8;
        box-shadow: 0 4px 12px rgba(0,0,0,0.06);
        text-align: center;
        margin-top: 20px;
      }
      .dashboard-placeholder p {
        color: #6d7a8b;
        font-size: 15px;
      }
      .dashboard-placeholder h3 {
        font-size: 20px;
        margin-bottom: 10px;
      }

      iframe.analytics-embed {
        width: 100%;
        height: 900px;
        border: none;
        border-radius: 14px;
        margin-top: 20px;
        box-shadow: 0 4px 14px rgba(0,0,0,0.08);
      }
    </style>
  </head>

  <body>

    <div class="admin-layout" id="adminLayout">

      <!-- SIDEBAR -->
      <aside class="admin-sidebar">
        <div class="sidebar-brand">
          <div class="brand-logo">A</div>
          <div class="brand-text">
            <span class="brand-title">Aerial Tribute</span>
            <span class="brand-subtitle">Admin Portal</span>
          </div>
        </div>

        <!-- Overview -->
        <div class="sidebar-section-label">Overview</div>
        <div class="sidebar-nav">
          <div class="sidebar-link active" data-page="dashboard">
            <span class="sidebar-link-icon">üè†</span> Dashboard
          </div>
          <div class="sidebar-link" data-page="analytics">
            <span class="sidebar-link-icon">üìä</span> Site Analytics
          </div>
        </div>

        <!-- Programs -->
        <div class="sidebar-section-label">Programs</div>
        <div class="sidebar-nav">
          <div class="sidebar-link" data-page="awards">
            <span class="sidebar-link-icon">üéì</span> Award Requests
          </div>
          <div class="sidebar-link" data-page="volunteers">
            <span class="sidebar-link-icon">ü§ù</span> Volunteer Submissions
          </div>
          <div class="sidebar-link" data-page="resources">
            <span class="sidebar-link-icon">üõ©Ô∏è</span> Resource Requests
          </div>
        </div>

        <!-- System -->
        <div class="sidebar-section-label">System</div>
        <div class="sidebar-nav">
          <div class="sidebar-link" data-page="settings">
            <span class="sidebar-link-icon">‚öôÔ∏è</span> Settings
          </div>
        </div>

        <div class="sidebar-footer">
          <div>Signed in as admin.</div>
          <div>Return to <a href="index.html">main site</a>.</div>
        </div>
      </aside>

      <!-- MAIN AREA -->
      <main class="admin-main">

        <!-- TOP BAR -->
        <header class="admin-topbar">
          <div class="topbar-left">
            <div class="topbar-title">Hello, Admin!</div>
            <div class="topbar-subtitle">Manage your site activity and submissions.</div>
          </div>

          <div class="topbar-right">
            <div class="chip">
              <span class="chip-dot"></span> System healthy
            </div>
            <button id="logoutBtn" class="btn-ghost">‚éã Log out</button>
            <div class="avatar" id="adminAvatar">A</div>
          </div>
        </header>

        <!-- PAGE CONTENT -->
        <section class="admin-content">

          <!-- DASHBOARD (simplified per your instruction) -->
          <div class="page-section active" id="page-dashboard">
            <h1 class="page-title">Dashboard Overview</h1>
            <p class="section-subtitle">This section will later show high-level metrics from your forms and operations.</p>

            <div class="dashboard-placeholder">
              <h3>Dashboard Metrics Coming Soon</h3>
              <p>We'll add high-level summaries here once your form submission data is wired in.</p>
            </div>
          </div>

          <!-- SITE ANALYTICS -->
          <div class="page-section" id="page-analytics">
            <h1 class="page-title">Site Analytics</h1>
            <p class="section-subtitle">Google Analytics 4 reporting for your website.</p>

            <iframe
              class="analytics-embed"
              allowfullscreen
              loading="lazy"
              src="https://lookerstudio.google.com/embed/reporting/3bd6a3ee-00ae-44f8-9a1c-268369c625a5/page/kIV1C"
            ></iframe>
          </div>

          <!-- AWARD REQUESTS (placeholder for now) -->
          <div class="page-section" id="page-awards">
            <h1 class="page-title">Award Requests</h1>
            <div class="dashboard-placeholder">
              <h3>Award Request Data</h3>
              <p>We'll connect your Google Form responses here.</p>
            </div>
          </div>

          <!-- VOLUNTEER SUBMISSIONS -->
          <div class="page-section" id="page-volunteers">
            <h1 class="page-title">Volunteer Submissions</h1>
            <div class="dashboard-placeholder">
              <h3>Volunteer Form Data</h3>
              <p>Responses from your volunteer form will appear here.</p>
            </div>
          </div>

          <!-- RESOURCE REQUESTS -->
          <div class="page-section" id="page-resources">
            <h1 class="page-title">Resource Requests</h1>
            <div class="dashboard-placeholder">
              <h3>Resource Request Data</h3>
              <p>We'll add response tables for airport / nonprofit resource requests.</p>
            </div>
          </div>

          <!-- SETTINGS -->
          <div class="page-section" id="page-settings">
            <h1 class="page-title">Settings</h1>
            <div class="dashboard-placeholder">
              <h3>System Preferences</h3>
              <p>Future admin management panel goes here.</p>
            </div>
          </div>

        </section>

      </main>
    </div>

    <!-- Firebase Auth & Navigation -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
      import {
        getAuth,
        onAuthStateChanged,
        signOut,
      } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js";

      /* Firebase config */
      const firebaseConfig = {
        apiKey: "AIzaSyDpSAtGWJeDQtkn20jhmeTQhjyMf6Dl-Hc",
        authDomain: "aerialtributeproject25.firebaseapp.com",
        projectId: "aerialtributeproject25",
        storageBucket: "aerialtributeproject25.appspot.com",
        messagingSenderId: "559701693905",
        appId: "1:559701693905:web:194b9daed39adbc68f223f",
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      /* Auth Guard */
      onAuthStateChanged(auth, async (user) => {
        if (!user) {
          window.location.href = "login.html";
          return;
        }

        const token = await user.getIdTokenResult();
        if (!token.claims.admin) {
          await signOut(auth);
          window.location.href = "index.html";
          return;
        }

        document.getElementById("adminLayout").style.visibility = "visible";

        const initial = (user.email || "A").charAt(0).toUpperCase();
        document.getElementById("adminAvatar").textContent = initial;
      });

      /* Logout */
      document.getElementById("logoutBtn").addEventListener("click", async () => {
        await signOut(auth);
        window.location.href = "index.html";
      });

      /* Navigation */
      const links = document.querySelectorAll(".sidebar-link");
      const pages = document.querySelectorAll(".page-section");

      links.forEach((link) => {
        link.addEventListener("click", () => {
          links.forEach((l) => l.classList.remove("active"));
          link.classList.add("active");

          pages.forEach((p) => p.classList.remove("active"));
          const target = link.dataset.page;
          document.getElementById("page-" + target).classList.add("active");
        });
      });
    </script>
  </body>
</html>
